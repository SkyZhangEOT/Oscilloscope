`timescale 1ns / 1ps
//////////////////////////////////////////////////////////////////////////////////
// Company: uestc
// Engineer: zhangwenxiang
// 
// Create Date: 2019/05/29 23:00:56
// Design Name: 
// Module Name: data_delay
// Project Name: 
// Target Devices: 
// Tool Versions: 
// Description: 
// 
// Dependencies: 
// 
// Revision:
// Revision 0.01 - File Created
// Additional Comments:
// 
//////////////////////////////////////////////////////////////////////////////////


module data_delay(
    input clk_in,
    input [2:0] h_state3_in,//0×ó£¬1ÖÐ£¬2ÓÒ
    input [11:0] data_in,
    output reg[11:0] data_out,
    output reg[11:0] data_before_out,
    output wire[11:0] data_save_out
    );
    
    reg [11:0] wave[0:511];
    assign data_save_out = wave[0];
    always@(*)
        case(h_state3_in)
            3'd0: begin data_out = wave[1]; data_before_out = wave[0]; end
            3'd1: begin data_out = wave[256]; data_before_out = wave[255]; end
            3'd2: begin data_out = wave[511]; data_before_out = wave[510]; end
            default: begin data_out = wave[256]; data_before_out = wave[255]; end
        endcase
            
    always@(posedge clk_in)
    begin
        wave[0] <= wave[1];
        wave[1] <= wave[2];
        wave[2] <= wave[3];
        wave[3] <= wave[4];
        wave[4] <= wave[5];
        wave[5] <= wave[6];
        wave[6] <= wave[7];
        wave[7] <= wave[8];
        wave[8] <= wave[9];
        wave[9] <= wave[10];
        wave[10] <= wave[11];
        wave[11] <= wave[12];
        wave[12] <= wave[13];
        wave[13] <= wave[14];
        wave[14] <= wave[15];
        wave[15] <= wave[16];
        wave[16] <= wave[17];
        wave[17] <= wave[18];
        wave[18] <= wave[19];
        wave[19] <= wave[20];
        wave[20] <= wave[21];
        wave[21] <= wave[22];
        wave[22] <= wave[23];
        wave[23] <= wave[24];
        wave[24] <= wave[25];
        wave[25] <= wave[26];
        wave[26] <= wave[27];
        wave[27] <= wave[28];
        wave[28] <= wave[29];
        wave[29] <= wave[30];
        wave[30] <= wave[31];
        wave[31] <= wave[32];
        wave[32] <= wave[33];
        wave[33] <= wave[34];
        wave[34] <= wave[35];
        wave[35] <= wave[36];
        wave[36] <= wave[37];
        wave[37] <= wave[38];
        wave[38] <= wave[39];
        wave[39] <= wave[40];
        wave[40] <= wave[41];
        wave[41] <= wave[42];
        wave[42] <= wave[43];
        wave[43] <= wave[44];
        wave[44] <= wave[45];
        wave[45] <= wave[46];
        wave[46] <= wave[47];
        wave[47] <= wave[48];
        wave[48] <= wave[49];
        wave[49] <= wave[50];
        wave[50] <= wave[51];
        wave[51] <= wave[52];
        wave[52] <= wave[53];
        wave[53] <= wave[54];
        wave[54] <= wave[55];
        wave[55] <= wave[56];
        wave[56] <= wave[57];
        wave[57] <= wave[58];
        wave[58] <= wave[59];
        wave[59] <= wave[60];
        wave[60] <= wave[61];
        wave[61] <= wave[62];
        wave[62] <= wave[63];
        wave[63] <= wave[64];
        wave[64] <= wave[65];
        wave[65] <= wave[66];
        wave[66] <= wave[67];
        wave[67] <= wave[68];
        wave[68] <= wave[69];
        wave[69] <= wave[70];
        wave[70] <= wave[71];
        wave[71] <= wave[72];
        wave[72] <= wave[73];
        wave[73] <= wave[74];
        wave[74] <= wave[75];
        wave[75] <= wave[76];
        wave[76] <= wave[77];
        wave[77] <= wave[78];
        wave[78] <= wave[79];
        wave[79] <= wave[80];
        wave[80] <= wave[81];
        wave[81] <= wave[82];
        wave[82] <= wave[83];
        wave[83] <= wave[84];
        wave[84] <= wave[85];
        wave[85] <= wave[86];
        wave[86] <= wave[87];
        wave[87] <= wave[88];
        wave[88] <= wave[89];
        wave[89] <= wave[90];
        wave[90] <= wave[91];
        wave[91] <= wave[92];
        wave[92] <= wave[93];
        wave[93] <= wave[94];
        wave[94] <= wave[95];
        wave[95] <= wave[96];
        wave[96] <= wave[97];
        wave[97] <= wave[98];
        wave[98] <= wave[99];
        wave[99] <= wave[100];
        wave[100] <= wave[101];
        wave[101] <= wave[102];
        wave[102] <= wave[103];
        wave[103] <= wave[104];
        wave[104] <= wave[105];
        wave[105] <= wave[106];
        wave[106] <= wave[107];
        wave[107] <= wave[108];
        wave[108] <= wave[109];
        wave[109] <= wave[110];
        wave[110] <= wave[111];
        wave[111] <= wave[112];
        wave[112] <= wave[113];
        wave[113] <= wave[114];
        wave[114] <= wave[115];
        wave[115] <= wave[116];
        wave[116] <= wave[117];
        wave[117] <= wave[118];
        wave[118] <= wave[119];
        wave[119] <= wave[120];
        wave[120] <= wave[121];
        wave[121] <= wave[122];
        wave[122] <= wave[123];
        wave[123] <= wave[124];
        wave[124] <= wave[125];
        wave[125] <= wave[126];
        wave[126] <= wave[127];
        wave[127] <= wave[128];
        wave[128] <= wave[129];
        wave[129] <= wave[130];
        wave[130] <= wave[131];
        wave[131] <= wave[132];
        wave[132] <= wave[133];
        wave[133] <= wave[134];
        wave[134] <= wave[135];
        wave[135] <= wave[136];
        wave[136] <= wave[137];
        wave[137] <= wave[138];
        wave[138] <= wave[139];
        wave[139] <= wave[140];
        wave[140] <= wave[141];
        wave[141] <= wave[142];
        wave[142] <= wave[143];
        wave[143] <= wave[144];
        wave[144] <= wave[145];
        wave[145] <= wave[146];
        wave[146] <= wave[147];
        wave[147] <= wave[148];
        wave[148] <= wave[149];
        wave[149] <= wave[150];
        wave[150] <= wave[151];
        wave[151] <= wave[152];
        wave[152] <= wave[153];
        wave[153] <= wave[154];
        wave[154] <= wave[155];
        wave[155] <= wave[156];
        wave[156] <= wave[157];
        wave[157] <= wave[158];
        wave[158] <= wave[159];
        wave[159] <= wave[160];
        wave[160] <= wave[161];
        wave[161] <= wave[162];
        wave[162] <= wave[163];
        wave[163] <= wave[164];
        wave[164] <= wave[165];
        wave[165] <= wave[166];
        wave[166] <= wave[167];
        wave[167] <= wave[168];
        wave[168] <= wave[169];
        wave[169] <= wave[170];
        wave[170] <= wave[171];
        wave[171] <= wave[172];
        wave[172] <= wave[173];
        wave[173] <= wave[174];
        wave[174] <= wave[175];
        wave[175] <= wave[176];
        wave[176] <= wave[177];
        wave[177] <= wave[178];
        wave[178] <= wave[179];
        wave[179] <= wave[180];
        wave[180] <= wave[181];
        wave[181] <= wave[182];
        wave[182] <= wave[183];
        wave[183] <= wave[184];
        wave[184] <= wave[185];
        wave[185] <= wave[186];
        wave[186] <= wave[187];
        wave[187] <= wave[188];
        wave[188] <= wave[189];
        wave[189] <= wave[190];
        wave[190] <= wave[191];
        wave[191] <= wave[192];
        wave[192] <= wave[193];
        wave[193] <= wave[194];
        wave[194] <= wave[195];
        wave[195] <= wave[196];
        wave[196] <= wave[197];
        wave[197] <= wave[198];
        wave[198] <= wave[199];
        wave[199] <= wave[200];
        wave[200] <= wave[201];
        wave[201] <= wave[202];
        wave[202] <= wave[203];
        wave[203] <= wave[204];
        wave[204] <= wave[205];
        wave[205] <= wave[206];
        wave[206] <= wave[207];
        wave[207] <= wave[208];
        wave[208] <= wave[209];
        wave[209] <= wave[210];
        wave[210] <= wave[211];
        wave[211] <= wave[212];
        wave[212] <= wave[213];
        wave[213] <= wave[214];
        wave[214] <= wave[215];
        wave[215] <= wave[216];
        wave[216] <= wave[217];
        wave[217] <= wave[218];
        wave[218] <= wave[219];
        wave[219] <= wave[220];
        wave[220] <= wave[221];
        wave[221] <= wave[222];
        wave[222] <= wave[223];
        wave[223] <= wave[224];
        wave[224] <= wave[225];
        wave[225] <= wave[226];
        wave[226] <= wave[227];
        wave[227] <= wave[228];
        wave[228] <= wave[229];
        wave[229] <= wave[230];
        wave[230] <= wave[231];
        wave[231] <= wave[232];
        wave[232] <= wave[233];
        wave[233] <= wave[234];
        wave[234] <= wave[235];
        wave[235] <= wave[236];
        wave[236] <= wave[237];
        wave[237] <= wave[238];
        wave[238] <= wave[239];
        wave[239] <= wave[240];
        wave[240] <= wave[241];
        wave[241] <= wave[242];
        wave[242] <= wave[243];
        wave[243] <= wave[244];
        wave[244] <= wave[245];
        wave[245] <= wave[246];
        wave[246] <= wave[247];
        wave[247] <= wave[248];
        wave[248] <= wave[249];
        wave[249] <= wave[250];
        wave[250] <= wave[251];
        wave[251] <= wave[252];
        wave[252] <= wave[253];
        wave[253] <= wave[254];
        wave[254] <= wave[255];
        wave[255] <= wave[256];
        wave[256] <= wave[257];
        wave[257] <= wave[258];
        wave[258] <= wave[259];
        wave[259] <= wave[260];
        wave[260] <= wave[261];
        wave[261] <= wave[262];
        wave[262] <= wave[263];
        wave[263] <= wave[264];
        wave[264] <= wave[265];
        wave[265] <= wave[266];
        wave[266] <= wave[267];
        wave[267] <= wave[268];
        wave[268] <= wave[269];
        wave[269] <= wave[270];
        wave[270] <= wave[271];
        wave[271] <= wave[272];
        wave[272] <= wave[273];
        wave[273] <= wave[274];
        wave[274] <= wave[275];
        wave[275] <= wave[276];
        wave[276] <= wave[277];
        wave[277] <= wave[278];
        wave[278] <= wave[279];
        wave[279] <= wave[280];
        wave[280] <= wave[281];
        wave[281] <= wave[282];
        wave[282] <= wave[283];
        wave[283] <= wave[284];
        wave[284] <= wave[285];
        wave[285] <= wave[286];
        wave[286] <= wave[287];
        wave[287] <= wave[288];
        wave[288] <= wave[289];
        wave[289] <= wave[290];
        wave[290] <= wave[291];
        wave[291] <= wave[292];
        wave[292] <= wave[293];
        wave[293] <= wave[294];
        wave[294] <= wave[295];
        wave[295] <= wave[296];
        wave[296] <= wave[297];
        wave[297] <= wave[298];
        wave[298] <= wave[299];
        wave[299] <= wave[300];
        wave[300] <= wave[301];
        wave[301] <= wave[302];
        wave[302] <= wave[303];
        wave[303] <= wave[304];
        wave[304] <= wave[305];
        wave[305] <= wave[306];
        wave[306] <= wave[307];
        wave[307] <= wave[308];
        wave[308] <= wave[309];
        wave[309] <= wave[310];
        wave[310] <= wave[311];
        wave[311] <= wave[312];
        wave[312] <= wave[313];
        wave[313] <= wave[314];
        wave[314] <= wave[315];
        wave[315] <= wave[316];
        wave[316] <= wave[317];
        wave[317] <= wave[318];
        wave[318] <= wave[319];
        wave[319] <= wave[320];
        wave[320] <= wave[321];
        wave[321] <= wave[322];
        wave[322] <= wave[323];
        wave[323] <= wave[324];
        wave[324] <= wave[325];
        wave[325] <= wave[326];
        wave[326] <= wave[327];
        wave[327] <= wave[328];
        wave[328] <= wave[329];
        wave[329] <= wave[330];
        wave[330] <= wave[331];
        wave[331] <= wave[332];
        wave[332] <= wave[333];
        wave[333] <= wave[334];
        wave[334] <= wave[335];
        wave[335] <= wave[336];
        wave[336] <= wave[337];
        wave[337] <= wave[338];
        wave[338] <= wave[339];
        wave[339] <= wave[340];
        wave[340] <= wave[341];
        wave[341] <= wave[342];
        wave[342] <= wave[343];
        wave[343] <= wave[344];
        wave[344] <= wave[345];
        wave[345] <= wave[346];
        wave[346] <= wave[347];
        wave[347] <= wave[348];
        wave[348] <= wave[349];
        wave[349] <= wave[350];
        wave[350] <= wave[351];
        wave[351] <= wave[352];
        wave[352] <= wave[353];
        wave[353] <= wave[354];
        wave[354] <= wave[355];
        wave[355] <= wave[356];
        wave[356] <= wave[357];
        wave[357] <= wave[358];
        wave[358] <= wave[359];
        wave[359] <= wave[360];
        wave[360] <= wave[361];
        wave[361] <= wave[362];
        wave[362] <= wave[363];
        wave[363] <= wave[364];
        wave[364] <= wave[365];
        wave[365] <= wave[366];
        wave[366] <= wave[367];
        wave[367] <= wave[368];
        wave[368] <= wave[369];
        wave[369] <= wave[370];
        wave[370] <= wave[371];
        wave[371] <= wave[372];
        wave[372] <= wave[373];
        wave[373] <= wave[374];
        wave[374] <= wave[375];
        wave[375] <= wave[376];
        wave[376] <= wave[377];
        wave[377] <= wave[378];
        wave[378] <= wave[379];
        wave[379] <= wave[380];
        wave[380] <= wave[381];
        wave[381] <= wave[382];
        wave[382] <= wave[383];
        wave[383] <= wave[384];
        wave[384] <= wave[385];
        wave[385] <= wave[386];
        wave[386] <= wave[387];
        wave[387] <= wave[388];
        wave[388] <= wave[389];
        wave[389] <= wave[390];
        wave[390] <= wave[391];
        wave[391] <= wave[392];
        wave[392] <= wave[393];
        wave[393] <= wave[394];
        wave[394] <= wave[395];
        wave[395] <= wave[396];
        wave[396] <= wave[397];
        wave[397] <= wave[398];
        wave[398] <= wave[399];
        wave[399] <= wave[400];
        wave[400] <= wave[401];
        wave[401] <= wave[402];
        wave[402] <= wave[403];
        wave[403] <= wave[404];
        wave[404] <= wave[405];
        wave[405] <= wave[406];
        wave[406] <= wave[407];
        wave[407] <= wave[408];
        wave[408] <= wave[409];
        wave[409] <= wave[410];
        wave[410] <= wave[411];
        wave[411] <= wave[412];
        wave[412] <= wave[413];
        wave[413] <= wave[414];
        wave[414] <= wave[415];
        wave[415] <= wave[416];
        wave[416] <= wave[417];
        wave[417] <= wave[418];
        wave[418] <= wave[419];
        wave[419] <= wave[420];
        wave[420] <= wave[421];
        wave[421] <= wave[422];
        wave[422] <= wave[423];
        wave[423] <= wave[424];
        wave[424] <= wave[425];
        wave[425] <= wave[426];
        wave[426] <= wave[427];
        wave[427] <= wave[428];
        wave[428] <= wave[429];
        wave[429] <= wave[430];
        wave[430] <= wave[431];
        wave[431] <= wave[432];
        wave[432] <= wave[433];
        wave[433] <= wave[434];
        wave[434] <= wave[435];
        wave[435] <= wave[436];
        wave[436] <= wave[437];
        wave[437] <= wave[438];
        wave[438] <= wave[439];
        wave[439] <= wave[440];
        wave[440] <= wave[441];
        wave[441] <= wave[442];
        wave[442] <= wave[443];
        wave[443] <= wave[444];
        wave[444] <= wave[445];
        wave[445] <= wave[446];
        wave[446] <= wave[447];
        wave[447] <= wave[448];
        wave[448] <= wave[449];
        wave[449] <= wave[450];
        wave[450] <= wave[451];
        wave[451] <= wave[452];
        wave[452] <= wave[453];
        wave[453] <= wave[454];
        wave[454] <= wave[455];
        wave[455] <= wave[456];
        wave[456] <= wave[457];
        wave[457] <= wave[458];
        wave[458] <= wave[459];
        wave[459] <= wave[460];
        wave[460] <= wave[461];
        wave[461] <= wave[462];
        wave[462] <= wave[463];
        wave[463] <= wave[464];
        wave[464] <= wave[465];
        wave[465] <= wave[466];
        wave[466] <= wave[467];
        wave[467] <= wave[468];
        wave[468] <= wave[469];
        wave[469] <= wave[470];
        wave[470] <= wave[471];
        wave[471] <= wave[472];
        wave[472] <= wave[473];
        wave[473] <= wave[474];
        wave[474] <= wave[475];
        wave[475] <= wave[476];
        wave[476] <= wave[477];
        wave[477] <= wave[478];
        wave[478] <= wave[479];
        wave[479] <= wave[480];
        wave[480] <= wave[481];
        wave[481] <= wave[482];
        wave[482] <= wave[483];
        wave[483] <= wave[484];
        wave[484] <= wave[485];
        wave[485] <= wave[486];
        wave[486] <= wave[487];
        wave[487] <= wave[488];
        wave[488] <= wave[489];
        wave[489] <= wave[490];
        wave[490] <= wave[491];
        wave[491] <= wave[492];
        wave[492] <= wave[493];
        wave[493] <= wave[494];
        wave[494] <= wave[495];
        wave[495] <= wave[496];
        wave[496] <= wave[497];
        wave[497] <= wave[498];
        wave[498] <= wave[499];
        wave[499] <= wave[500];
        wave[500] <= wave[501];
        wave[501] <= wave[502];
        wave[502] <= wave[503];
        wave[503] <= wave[504];
        wave[504] <= wave[505];
        wave[505] <= wave[506];
        wave[506] <= wave[507];
        wave[507] <= wave[508];
        wave[508] <= wave[509];
        wave[509] <= wave[510];
        wave[510] <= wave[511];
        wave[511] <= data_in;
    end
endmodule
